Donc nous revenons aujourd'hui, pour parler des questions de sécurité, également. Y a-t-il des questions avant, maintenant, nous montons d'un cran et nous examinons une question bien plus importante que nos centaines de favoris ici ? Y a-t-il une question ? Oui.

AUDITOIRE : [INAUDIBLE]

DAVID MALAN : Cela ne semble pas être supprimé. Oh, intéressant. Vous avez raison. Essayons quelque chose d'un peu plus difficile. LIKE "%friends%". Mieux ? Maintenant, ils sont partis. Donc je suppose, je devrais regarder les données de plus près, mais je suppose qu'une ou plusieurs personnes l'ont tapé avec une capitalisation légèrement différente, ou peut-être ont-ils appuyé sur une barre d'espace ou quelque chose, où je ne faisais pas de correspondance précise, ce qui rendait l'opérateur LIKE plus robuste.

Cependant, considérons un instant. Quel pourrait être le problème ici ? Genre, cela semble être une solution rapide et sale, mais en quel sens est-ce vraiment rapide et sale ?

AUDITOIRE : Comme si vous aviez une autre émission de télévision qui contient le mot ami, mais pas Friends, [INAUDIBLE].

DAVID MALAN : Oui, il pourrait y avoir une autre émission avec le mot « amis ». Assez raisonnable. Et je viens de les faire exploser aussi de ma base de données. Et en fait, nous pouvons probablement le voir pour de vrai. Si je vais de l'avant et que je regarde, par exemple, laissez-moi accéder à un navigateur ici, IMDB.com, site Web très populaire pour obtenir des critiques de films ou des informations sur les films. Laissez-moi aller de l'avant et rechercher des amis. Et oui, le hit le plus populaire semble être la version 1994 de Friends, mais il y a Friends with Benefits. Il y a Just Friends, We Are Your Friends, My Best Friend's Wedding, Fisherman's Friends, et ainsi de suite. Certains de ces films, certaines de ces émissions de télévision. Et si nous avions fouillé un peu plus loin dans nos propres données de centaines de lignes, peut-être que certains d'entre vous avaient aussi certaines de ces émissions comme vos favoris. Méfiez-vous donc aussi de cela.

Donc, en préparation pour aujourd'hui, nous voulions jouer avec un ensemble de données encore plus juteux que celui que nous pouvions générer pour nous-mêmes. Et merveilleusement, IMDB rend une grande partie de sa base de données disponible au téléchargement sous forme de fichiers TSV, Tab-Separated Values. Ce n'est vraiment pas fondamentalement différent des valeurs séparées par des virgules. Un humain à IMDB vient de décider d'utiliser des onglets pour séparer leurs valeurs au lieu de virgules.

Et si vous lisez cette page ici, vous verrez qu'ils vous permettent de télécharger un tas de fichiers différents, dont l'un se concentrera initialement, spécifiquement sur title.basics.tsv.gz. C'est une bouchée, mais cela veut simplement dire qu'il s'agit d'informations de base sur les titres dans leur base de données. Gz signifie qu'il est compressé G-Zip, qui est comme Zip. Si vous êtes familier, sur Mac ou PC, c'est juste une autre façon de compresser des informations, mais vous pouvez également les décompresser sur un ordinateur. Dot TSV signifie valeurs séparées par des tabulations.

Maintenant, nous avons lu à l'avance les informations ici, mais permettez-moi de les résumer comme suit. Il y a des informations juteuses dans ce fichier. Et je vais aller de l'avant et télécharger ce fichier ici. Si je clique sur un lien sur le site Web d'IMDB, je verrai un fichier appelé title.basics.tsv.gz. Je vais aller de l'avant et laisser cela se télécharger en arrière-plan. Il semble que ce soit plus de 100 mégaoctets. Si je clique dessus sur mon Mac, cela va le décompresser. Et vous verrez ici que, apparemment, cela fait 532 mégaoctets une fois décompressé. C'est donc bien plus volumineux que le fichier CSV que j'ai téléchargé depuis Google il y a quelques minutes, qui fait 24 kilo-octets, 24 000 octets. C'est 532 millions d'octets. C'est donc un ordre de grandeur plus important, ce qui signifie que nos décisions de conception d'aujourd'hui vont vraiment avoir de l'importance.

Maintenant, si nous jetons un œil à l'intérieur de ce fichier, nous verrons un tas de champs intéressants. Et j'ai essentiellement résumé cela à partir de leur propre documentation en ligne. Il y a ces cinq champs qui sont intéressants pour le moment, et nous allons les séparer maintenant. Donc tconst, je ne l'ai pas reconnu. C'est un terme spécifique à IMDB, semble-t-il, mais cela signifie une sorte de constante de titre. C'est un identifiant unique pour chaque film de la base de données. Ainsi, par exemple, l'un des films de ce fichier TSV, que j'ouvrirai dans un instant, a la valeur unique tt4786824. Pourquoi ? Juste parce que.

Mais il s'avère que nous pouvons réellement voir ce que c'est. Laissez-moi récupérer cette valeur et aller sur IMDB.com/title/tt4786824. Entrer. Ceux-ci ont effectivement une signification. C'est l'identifiant unique de The Crown, une émission télévisée populaire que vous pouvez désormais regarder sur Netflix.

Donc, si vous retournez au champ réel, c'est comme ça que j'ai passé l'été. Donc, si vous retournez aux champs ici, nous avons non seulement tconst, qui identifie de manière unique le film, mais nous avons aussi un type de titre. Donc, il s'avère que dans ce fichier de 500 mégaoctets, il y a d'énormes quantités d'informations sur les films, les séries télévisées, les documentaires, les courts métrages, bien plus de données que nous ne pourrions éventuellement jouer en une journée. Nous allons donc nous concentrer uniquement sur les séries télévisées, comme celle-ci, l'émission The Crown.

Le titre principal est le nom dans le fichier qui est donné au titre principal de l'émission. Parfois, les émissions ont apparemment des titres différents dans différentes zones géographiques ou communautés, donc le titre principal est celui sous lequel la plupart des gens le connaissent. L'année de début est l'année d'une émission de télévision qui, dans laquelle cette émission de télévision a débuté. The Crown est sorti pour la première fois en 2016. Et les genres sont, un peu bizarrement, une liste séparée par des virgules des genres dans lesquels cette émission tombe. Et je dis que c'est un peu bizarre, parce que nous avons un fichier TSV, mais ils utilisent des virgules à l'intérieur. C'est probablement parmi les motivations pour avoir utilisé des tabulations, pour séparer toutes les colonnes, car ils veulent utiliser des virgules à d'autres fins ici. Mais c'est un peu désordonné. Ce n'est pas nécessairement la meilleure décision de conception ici.

Alors que pouvons-nous faire avec toutes ces données ici ? Alors allons-y et commençons à récupérer certaines de ces données et à écrire quelques scripts les impliquant. Mais permettez-moi d'émettre une mise en garde. Il s'avère que lorsque vous avez beaucoup de données dans une base de données, cela peut prendre beaucoup de temps pour les analyser ou les analyser. Et donc, si jamais vous regardez certaines émissions de pâtisserie comme Julia Child dans le coin de la rue ici à Cambridge, il y aura très souvent une certaine magie télévisuelle par laquelle quelqu'un mélange le mélange à gâteau et le met dans le four, puis deux minutes plus tard, le tour est joué, il sort. C'est parce que certains des scripts que nous écrirons aujourd'hui pourraient en fait prendre plusieurs minutes à s'exécuter, mais nous allons les exécuter en arrière-plan et j'utiliserai les résultats que j'ai créés ici à l'avance.

Alors, comment allons-nous commencer à naviguer dans cet ensemble de données ? Eh bien, tout d'abord, permettez-moi d'ouvrir ce fichier. Et je vais utiliser ma propre fenêtre de terminal ici. Ce fichier s'appelait titles.basics.tsv. Notez que même dans mon programme ici, son ouverture a pris un moment, mais c'est à quoi cela ressemble. C'est un peu cryptique à première vue, mais remarquez que la première ligne est l'en-tête du fichier. Nous avons donc tconst et title type et titre principal, etc. Ensuite, chaque ligne suivante semble commencer par l'un de ces identifiants uniques, et ils semblent augmenter de manière monotone, 1, 2, 3, 4, mais ils commencent par tt puis un certain nombre de chiffres.

Ensuite, vous voyez qu'il s'agit d'un tas de courts métrages, donc des courts métrages ou autres. Et si nous continuions à faire défiler, nous verrions d'autres valeurs. Voici le premier film de la base de données. Et si nous continuons de faire défiler, de faire défiler et de faire défiler, nous en